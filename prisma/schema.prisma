// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id         Int          @id @default(autoincrement())
  email      String
  name       String
  surname    String
  password   String
  Group_User Group_User[]
  Item_User  Item_User[]
}

model Group {
  id                Int             @id @default(autoincrement())
  name              String
  needsConfirmation Boolean
  Group_User        Group_User[]
  Trip              Trip[]
  User_Template     User_Template[]
}

model Group_User {
  id        Int     @id @default(autoincrement())
  group     Group   @relation(fields: [groupId], references: [id])
  groupId   Int
  user      User    @relation(fields: [userId], references: [id])
  userId    Int
  isAdmin   Boolean
  confirmed Boolean
}

model Trip {
  id             Int      @id @default(autoincrement())
  group          Group    @relation(fields: [groupId], references: [id])
  groupId        Int
  name           String
  location       String?
  meetupLocation String?
  timestamp      DateTime
  Item           Item[]
}

model Item {
  id             Int         @id @default(autoincrement())
  trip           Trip        @relation(fields: [tripId], references: [id])
  tripId         Int
  name           String
  numberOfPeople Int
  confirmed      Boolean
  Item_User      Item_User[]
}

model Item_User {
  id             Int     @id @default(autoincrement())
  user           User    @relation(fields: [userId], references: [id])
  userId         Int
  item           Item    @relation(fields: [itemId], references: [id])
  itemId         Int
  confirmed      Boolean
  adminRequested Boolean
}

model User_Template {
  id            Int             @id @default(autoincrement())
  group         Group           @relation(fields: [groupId], references: [id])
  groupId       Int
  name          String
  Item_Template Item_Template[]
}

model Item_Template {
  id             Int           @id @default(autoincrement())
  userTemplate   User_Template @relation(fields: [userTemplateId], references: [id])
  userTemplateId Int
  name           String
  numberOfPeople Int
}
